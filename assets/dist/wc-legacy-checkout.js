!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,o){for(var r=0;r<o.length;r++){var n=o[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,u=void 0,u=function(t,o){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i),"symbol"===e(u)?u:String(u)),n)}var i,u}var o=function(){function e(t,o,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jQuery=t,this.body=o,this.form=r}var o,r;return o=e,(r=[{key:"setup",value:function(){var e=this;this.jQuery(this.body).on("init_checkout",(function(){return e.initCheckout()}))}},{key:"initCheckout",value:function(){var e=this,t=this.form.querySelector(".pronamic-pay-mollie-card-field");if(null!==t){var o=t.dataset.mollieProfileId,r=JSON.parse(t.dataset.mollieOptions);this.mollie=Mollie(o,r),this.checkoutPlaceOrderListener=function(){return e.checkoutPlaceOrder()},this.jQuery(this.form).on("checkout_place_order",this.checkoutPlaceOrderListener),this.jQuery(this.body).on("updated_checkout",(function(){return e.updatedCheckout()})),this.mollieCardComponent=this.mollie.createComponent("card")}}},{key:"updatedCheckout",value:function(){this.cardElement&&this.mollieCardComponent.unmount(),this.cardElement=this.form.querySelector(".pronamic-pay-mollie-card-field"),null!==this.cardElement&&this.mollieCardComponent.mount(this.cardElement)}},{key:"checkoutPlaceOrder",value:function(){var e=this;return this.mollie.createToken().then((function(t){return e.processTokenResponse(t)})),!1}},{key:"processTokenResponse",value:function(e){if(!e.error){var t=document.getElementById("pronamic_pay_mollie_card_token");t&&(t.value=e.token),this.jQuery(this.form).off("checkout_place_order",this.checkoutPlaceOrderListener),this.jQuery(this.form).submit()}}}])&&t(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),e}();jQuery&&document.forms.checkout&&new o(jQuery,document.body,document.forms.checkout).setup()}();