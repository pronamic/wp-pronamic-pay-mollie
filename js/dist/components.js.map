{"version":3,"file":"components.js","names":["initMollieComponents","$elements","document","querySelectorAll","forEach","$element","data","dataset","Error","mollie","Mollie","locale","testmode","components","id","label","component","element","fieldElement","createElement","setAttribute","errorElement","append","length","createComponent","mount","jQuery","body","on"],"sources":["../src/components.js"],"sourcesContent":["/* global Mollie */\n\n'use strict';\n\n/**\n * Mollie Components.\n *\n * @link https://docs.mollie.com/components/overview\n */\n( () => {\n\tfunction initMollieComponents() {\n\t\tconst $elements = document.querySelectorAll( '.pronamic_pay_mollie_components' );\n\n\t\t$elements.forEach( ( $element ) => {\n\t\t\tconst data = $element.dataset;\n\n\t\t\tif ( ! ( \"mollie-profile-id\" in data ) ) {\n\t\t\t\tthrow new Error( 'No Mollie profile ID in element dataset. Unable to load Mollie Components.' );\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Initialize Mollie object.\n\t\t\tconst mollie = Mollie(\n\t\t\t\tdata['mollie-profile-id'],\n\t\t\t\t{\n\t\t\t\t\tlocale: data['mollie-locale'] ?? null,\n\t\t\t\t\ttestmode: ( \"mollie-testmode\" in data ),\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// Create components.\n\t\t\tconst components = [\n\t\t\t\t{\n\t\t\t\t\tid: 'card-number',\n\t\t\t\t\tlabel: 'Card Number',\n\t\t\t\t\tcomponent: 'cardNumber'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'card-holder',\n\t\t\t\t\tlabel: 'Card Holder',\n\t\t\t\t\tcomponent: 'cardHolder'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'expiry-date',\n\t\t\t\t\tlabel: 'Expiry Date',\n\t\t\t\t\tcomponent: 'expiryDate'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'verification-code',\n\t\t\t\t\tlabel: 'Verification Code',\n\t\t\t\t\tcomponent: 'verificationCode'\n\t\t\t\t}\n\t\t\t];\n\n\t\t\tcomponents.forEach( ( element ) => {\n\t\t\t\tlet fieldElement = document.createElement( 'div' );\n\t\t\t\tfieldElement.setAttribute( 'id', element.id );\n\n\t\t\t\tlet errorElement = document.createElement( 'div' );\n\t\t\t\terrorElement.setAttribute( 'id', element.id + '-error' );\n\n\t\t\t\t$element.append( element.label );\n\t\t\t\t$element.append( fieldElement );\n\t\t\t\t$element.append( errorElement );\n\n\t\t\t\t// Mount component.\n\t\t\t\tif ( document.querySelectorAll('#' + element.id ).length > 0 ) {\n\t\t\t\t\tlet component = mollie.createComponent( element.component );\n\n\t\t\t\t\tcomponent.mount( '#' + element.id );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Handling errors.\n\t\t\t/*\n            var cardNumberError = document.querySelector('#card-number-error');\n\n            cardNumber.addEventListener('change', event => {\n              if (event.error && event.touched) {\n                cardNumberError.textContent = event.error;\n              } else {\n                cardNumberError.textContent = '';\n              }\n            });\n\t\t\t */\n\t\t});\n\t}\n\n\tjQuery( document.body ).on( 'updated_checkout', initMollieComponents );\n} )();\n"],"mappings":"AAAA;;AAEA,YAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA,CAAE,MAAM;EACP,SAASA,oBAAoB,GAAG;IAC/B,MAAMC,SAAS,GAAGC,QAAQ,CAACC,gBAAgB,CAAE,iCAAiC,CAAE;IAEhFF,SAAS,CAACG,OAAO,CAAIC,QAAQ,IAAM;MAClC,MAAMC,IAAI,GAAGD,QAAQ,CAACE,OAAO;MAE7B,IAAK,EAAI,mBAAmB,IAAID,IAAI,CAAE,EAAG;QACxC,MAAM,IAAIE,KAAK,CAAE,4EAA4E,CAAE;QAE/F;MACD;;MAEA;MACA,MAAMC,MAAM,GAAGC,MAAM,CACpBJ,IAAI,CAAC,mBAAmB,CAAC,EACzB;QACCK,MAAM,EAAEL,IAAI,CAAC,eAAe,CAAC,IAAI,IAAI;QACrCM,QAAQ,EAAI,iBAAiB,IAAIN;MAClC,CAAC,CACD;;MAED;MACA,MAAMO,UAAU,GAAG,CAClB;QACCC,EAAE,EAAE,aAAa;QACjBC,KAAK,EAAE,aAAa;QACpBC,SAAS,EAAE;MACZ,CAAC,EACD;QACCF,EAAE,EAAE,aAAa;QACjBC,KAAK,EAAE,aAAa;QACpBC,SAAS,EAAE;MACZ,CAAC,EACD;QACCF,EAAE,EAAE,aAAa;QACjBC,KAAK,EAAE,aAAa;QACpBC,SAAS,EAAE;MACZ,CAAC,EACD;QACCF,EAAE,EAAE,mBAAmB;QACvBC,KAAK,EAAE,mBAAmB;QAC1BC,SAAS,EAAE;MACZ,CAAC,CACD;MAEDH,UAAU,CAACT,OAAO,CAAIa,OAAO,IAAM;QAClC,IAAIC,YAAY,GAAGhB,QAAQ,CAACiB,aAAa,CAAE,KAAK,CAAE;QAClDD,YAAY,CAACE,YAAY,CAAE,IAAI,EAAEH,OAAO,CAACH,EAAE,CAAE;QAE7C,IAAIO,YAAY,GAAGnB,QAAQ,CAACiB,aAAa,CAAE,KAAK,CAAE;QAClDE,YAAY,CAACD,YAAY,CAAE,IAAI,EAAEH,OAAO,CAACH,EAAE,GAAG,QAAQ,CAAE;QAExDT,QAAQ,CAACiB,MAAM,CAAEL,OAAO,CAACF,KAAK,CAAE;QAChCV,QAAQ,CAACiB,MAAM,CAAEJ,YAAY,CAAE;QAC/Bb,QAAQ,CAACiB,MAAM,CAAED,YAAY,CAAE;;QAE/B;QACA,IAAKnB,QAAQ,CAACC,gBAAgB,CAAC,GAAG,GAAGc,OAAO,CAACH,EAAE,CAAE,CAACS,MAAM,GAAG,CAAC,EAAG;UAC9D,IAAIP,SAAS,GAAGP,MAAM,CAACe,eAAe,CAAEP,OAAO,CAACD,SAAS,CAAE;UAE3DA,SAAS,CAACS,KAAK,CAAE,GAAG,GAAGR,OAAO,CAACH,EAAE,CAAE;QACpC;MACD,CAAC,CAAE;;MAEH;MACA;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAEE,CAAC,CAAC;EACH;;EAEAY,MAAM,CAAExB,QAAQ,CAACyB,IAAI,CAAE,CAACC,EAAE,CAAE,kBAAkB,EAAE5B,oBAAoB,CAAE;AACvE,CAAC,GAAI"}